{"version":3,"sources":["../src/dom-renderer.js"],"names":[],"mappings":"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","file":"dom-renderer.js","sourcesContent":["import utils from \"./utils\";\nimport Renderer from \"./renderer\";\n\nconst DOMRenderer = function(boardElement, { hooks, options }) {\n  Renderer.call(this, boardElement, { hooks: hooks, options: options });\n\n  if (this.smallerStones) {\n    utils.addClass(boardElement, \"tenuki-smaller-stones\");\n  }\n\n  utils.addClass(boardElement, \"tenuki-dom-renderer\");\n};\n\nDOMRenderer.prototype = Object.create(Renderer.prototype);\nDOMRenderer.prototype.constructor = DOMRenderer;\n\nDOMRenderer.prototype._setup = function(boardState) {\n  Renderer.prototype._setup.call(this, boardState);\n\n  this.BOARD_LENGTH += 1;\n  this.computeSizing();\n};\n\nDOMRenderer.prototype.generateBoard = function(boardState) {\n  const renderer = this;\n  const boardElement = this.boardElement;\n  const zoomContainer = renderer.zoomContainer;\n\n  utils.appendElement(zoomContainer, utils.createElement(\"div\", { class: \"lines horizontal\" }));\n  utils.appendElement(zoomContainer, utils.createElement(\"div\", { class: \"lines vertical\" }));\n  utils.appendElement(zoomContainer, utils.createElement(\"div\", { class: \"hoshi-points\" }));\n  utils.appendElement(zoomContainer, utils.createElement(\"div\", { class: \"intersections\" }));\n\n  Renderer.hoshiPositionsFor(boardState.boardSize).forEach(h => {\n    const hoshi = utils.createElement(\"div\", { class: \"hoshi\" });\n    hoshi.style.left = (h.left * (renderer.INTERSECTION_GAP_SIZE + 1)) + \"px\";\n    hoshi.style.top = (h.top * (renderer.INTERSECTION_GAP_SIZE + 1)) + \"px\";\n\n    utils.appendElement(boardElement.querySelector(\".hoshi-points\"), hoshi);\n  });\n\n  for (let y = 0; y < boardState.boardSize; y++) {\n    const horizontalLine = utils.createElement(\"div\", { class: \"line horizontal\" });\n    horizontalLine.setAttribute(\"data-left-gutter\", boardState.yCoordinateFor(y));\n    utils.appendElement(boardElement.querySelector(\".lines.horizontal\"), horizontalLine);\n\n    const verticalLine = utils.createElement(\"div\", { class: \"line vertical\" });\n    verticalLine.setAttribute(\"data-top-gutter\", boardState.xCoordinateFor(y));\n    utils.appendElement(boardElement.querySelector(\".lines.vertical\"), verticalLine);\n\n    for (let x = 0; x < boardState.boardSize; x++) {\n      const intersectionElement = utils.createElement(\"div\", { class: \"intersection empty\" });\n      const stoneElement = utils.createElement(\"div\", { class: \"stone\" });\n      utils.appendElement(intersectionElement, stoneElement);\n\n      intersectionElement.setAttribute(\"data-position-x\", x);\n      intersectionElement.setAttribute(\"data-position-y\", y);\n\n      intersectionElement.style.left = (x * (renderer.INTERSECTION_GAP_SIZE + 1)) + \"px\";\n      intersectionElement.style.top = (y * (renderer.INTERSECTION_GAP_SIZE + 1)) + \"px\";\n\n      utils.appendElement(boardElement.querySelector(\".intersections\"), intersectionElement);\n\n      renderer.grid[y] = renderer.grid[y] || [];\n      renderer.grid[y][x] = intersectionElement;\n\n      this.addIntersectionEventListeners(intersectionElement, y, x);\n    }\n  }\n\n  // prevent the text-selection cursor\n  utils.addEventListener(boardElement.querySelector(\".lines.horizontal\"), \"mousedown\", function(e) {\n    e.preventDefault();\n  });\n  utils.addEventListener(boardElement.querySelector(\".lines.vertical\"), \"mousedown\", function(e) {\n    e.preventDefault();\n  });\n\n  boardElement.querySelector(\".lines.horizontal\").style.width = ((renderer.INTERSECTION_GAP_SIZE * (boardState.boardSize - 1)) + boardState.boardSize) + \"px\";\n  boardElement.querySelector(\".lines.horizontal\").style.height = ((renderer.INTERSECTION_GAP_SIZE * (boardState.boardSize - 1)) + boardState.boardSize) + \"px\";\n  boardElement.querySelector(\".lines.vertical\").style.width = ((renderer.INTERSECTION_GAP_SIZE * (boardState.boardSize - 1)) + boardState.boardSize) + \"px\";\n  boardElement.querySelector(\".lines.vertical\").style.height = ((renderer.INTERSECTION_GAP_SIZE * (boardState.boardSize - 1)) + boardState.boardSize) + \"px\";\n};\n\nDOMRenderer.prototype.setIntersectionClasses = function(intersectionEl, intersection, classes) {\n  if (intersectionEl.className !== classes.join(\" \")) {\n    intersectionEl.className = classes.join(\" \");\n  }\n};\n\nexport default DOMRenderer;\n"]}