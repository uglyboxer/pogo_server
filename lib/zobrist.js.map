{"version":3,"sources":["../src/zobrist.js"],"names":[],"mappings":";;;;;AAAA,IAAM,QAAQ,EAAd;;AAEA,SAAS,mBAAT,CAA6B,IAA7B,EAAmC,CAAnC,EAAsC,CAAtC,EAAyC,KAAzC,EAAgD;AAC9C,QAAM,IAAN,IAAoB,MAAM,IAAN,KAAe,EAAnC;AACA,QAAM,IAAN,EAAY,CAAZ,IAAoB,MAAM,IAAN,EAAY,CAAZ,KAAkB,EAAtC;AACA,QAAM,IAAN,EAAY,CAAZ,EAAe,CAAf,IAAoB,MAAM,IAAN,EAAY,CAAZ,EAAe,CAAf,KAAqB,EAAzC;;AAEA,MAAI,MAAM,IAAN,EAAY,CAAZ,EAAe,CAAf,EAAkB,KAAlB,CAAJ,EAA8B;AAC5B,WAAO,MAAM,IAAN,EAAY,CAAZ,EAAe,CAAf,EAAkB,KAAlB,CAAP;AACD;;AAED;AACA;AACA;AACA;AACA,MAAM,cAAc,KAAK,KAAL,CAAW,KAAK,MAAL,MAAiB,KAAK,GAAL,CAAS,CAAT,EAAY,EAAZ,IAAkB,CAAnC,CAAX,CAApB;AACA,QAAM,IAAN,EAAY,CAAZ,EAAe,CAAf,EAAkB,KAAlB,IAA2B,WAA3B;;AAEA,SAAO,WAAP;AACD;;kBAEc;AACb,QAAM,cAAS,SAAT,EAAoB,aAApB,EAAmC;AACvC,QAAI,IAAI,CAAR;;AAEA,kBAAc,OAAd,CAAsB,aAAK;AACzB,UAAI,CAAC,EAAE,OAAF,EAAL,EAAkB;AAChB,YAAM,UAAU,oBAAoB,SAApB,EAA+B,EAAE,CAAjC,EAAoC,EAAE,CAAtC,EAAyC,EAAE,KAA3C,CAAhB;AACA,YAAI,IAAI,OAAR;AACD;AACF,KALD;;AAOA,WAAO,CAAP;AACD;AAZY,C","file":"zobrist.js","sourcesContent":["const cache = {};\n\nfunction initialBitstringFor(size, y, x, value) {\n  cache[size]       = cache[size] || {};\n  cache[size][y]    = cache[size][y] || {};\n  cache[size][y][x] = cache[size][y][x] || {};\n\n  if (cache[size][y][x][value]) {\n    return cache[size][y][x][value];\n  }\n\n  // The number of legal 19x19 go moves is on the order of 10^170 â‰ˆ 2^565, so\n  // a hash output on the order of 2^31 is woefully insufficient for arbitrary\n  // positions, but it should be good enough for human play, since we're not\n  // searching the entire space. This should be good enough for ~300-move games.\n  const randomValue = Math.floor(Math.random() * (Math.pow(2, 31) - 1));\n  cache[size][y][x][value] = randomValue;\n\n  return randomValue;\n}\n\nexport default {\n  hash: function(boardSize, intersections) {\n    let h = 0;\n\n    intersections.forEach(i => {\n      if (!i.isEmpty()) {\n        const initial = initialBitstringFor(boardSize, i.y, i.x, i.value);\n        h = h ^ initial;\n      }\n    });\n\n    return h;\n  }\n};\n"]}